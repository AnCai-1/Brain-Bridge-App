<div class="p-4">
    <h2 class="text-2xl font-bold mb-4">View Applicants</h2>
  
    <label class="block mb-4 font-semibold">
      Select Assistantship:
      <select class="mt-1 p-2 rounded border w-full" [(ngModel)]="selectedPostingId">
        <option [ngValue]="null" disabled>Select a position</option>
        <option *ngFor="let posting of assistantships" [ngValue]="posting.id">
          {{ posting.title }}
        </option>
      </select>
    </label>
  
    <div *ngIf="selectedPostingId && applicants.length === 0" class="text-gray-500 mt-4">
      No applicants yet for this posting.
    </div>
  
    <div *ngIf="applicants.length > 0" class="grid gap-4 mt-4">
      <div *ngFor="let applicant of applicants" class="bg-white shadow rounded-lg p-4 flex justify-between items-center">
        <div>
          <p class="font-semibold text-lg">{{ applicant.name }}</p>
          <p class="text-gray-600">Department: {{ applicant.department }}</p>
          <p class="text-gray-600">GPA: {{ applicant.gpa }}, Year: {{ applicant.year }}</p>
        </div>
        
        <div class="flex items-center gap-4">
          <button
          [ngClass]="{
            'bg-green-100 text-green-800': applicant.status === 'accepted',
            'bg-red-100 text-red-800': applicant.status === 'rejected',
            'bg-blue-100 text-blue-800': !applicant.status
          }"
          class="px-4 py-2 rounded font-semibold hover:opacity-90 transition"
          (click)="openStatusModal(applicant)"
        >
          {{ applicant.status ? (applicant.status | titlecase) : 'Status' }}
        </button>
        <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500"(click)="openModal(applicant)">
          View
        </button>
      </div>
    </div>

    <!-- Modal Dialog -->
 <div *ngIf="selectedApplicant" class="modal-overlay">
      <div class="modal">
      <button class="modal-close" (click)="closeModal()" aria-label="Close modal">&times;</button>
  
      <h3 class="text-xl font-bold mb-2">{{ selectedApplicant.name }}</h3>
      <p><strong>Department:</strong> {{ selectedApplicant.department }}</p>
      <p><strong>GPA:</strong> {{ selectedApplicant.gpa }}</p>
      <p><strong>Year:</strong> {{ selectedApplicant.year }}</p>
      <p class="mt-4 mb-2 font-semibold">Motivation:</p>
      <p class="whitespace-pre-line mb-4">{{ selectedApplicant.motivation }}</p>
  
      <div class="flex justify-end gap-3">
        <a [href]="selectedApplicant.resumeUrl" download class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
          Download Resume
        </a>
        <a [href]="selectedApplicant.coverLetterUrl" download class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
          Download Cover Letter
        </a>
      </div>
     </div>
  </div>
  
</div>

<!-- Status Modal -->
<div *ngIf="statusModalApplicant" class="modal-overlay">
  <div class="modal w-80 text-center p-6">
    <button class="modal-close" (click)="closeStatusModal()" aria-label="Close modal">&times;</button>

    <h3 class="text-xl font-bold mb-6">Application Status</h3>

    <div class="flex flex-col gap-3">
      <button class="border border-gray-300 text-black py-2 rounded hover:bg-blue-500"
              (click)="updateStatus(statusModalApplicant, 'accepted')">
        Select
      </button>
      <button class="border border-gray-300 text-black py-2 rounded hover:bg-blue-500"
              (click)="updateStatus(statusModalApplicant, 'rejected')">
        Decline
      </button>
    </div>
  </div>
</div>
  