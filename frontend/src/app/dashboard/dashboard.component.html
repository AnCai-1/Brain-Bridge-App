<div class="p-4">
  <h2 class="text-2xl font-bold mb-4">My Assistantship Postings</h2>

  <div *ngIf="postings.length === 0" class="text-gray-500 italic">
    No assistantship postings found.
  </div>

  <div *ngFor="let post of postings" class="bg-white shadow-md rounded-xl p-4 mb-4 flex justify-between items-center">
    <div>
      <p class="text-lg font-semibold">Title: {{ post.title }}</p>
      <p class="text-gray-600">Domain: {{ post.domain }}</p>
      <p class="text-gray-600">Deadline: {{ post.endTime | date: 'yyyy-MM-dd' }}</p>
      <p class="text-gray-600">Status: {{ post.status }}</p>
    </div>

    <div class="flex items-center gap-4">
      <button class="bg-blue-100 text-blue-800 rounded-full px-4 py-2 font-semibold"
              (click)="goToApplicants(post._id)">
        {{ post.applicantCount }} Applicants
      </button>

      <button class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700"
              (click)="openModal(post)">
        View
      </button>
    </div>
  </div>

  <!-- Modal -->
  <div *ngIf="selectedPosting" class="modal-overlay">
    <div class="modal">
      <button class="modal-close" (click)="closeModal()" aria-label="Close modal">&times;</button>

      <h3 class="text-xl font-bold mb-2">{{ selectedPosting.title }}</h3>
      <p class="mb-2"><strong>Domain:</strong> {{ selectedPosting.domain }}</p>
      <p class="mb-2"><strong>Deadline:</strong> {{ selectedPosting.endTime | date:'yyyy-MM-dd' }}</p>
      <p class="mb-2"><strong>Status:</strong> {{ selectedPosting.status }}</p>
      <p class="mb-4 whitespace-pre-line"><strong>Description:</strong> {{ selectedPosting.description }}</p>

      <div class="flex justify-end gap-2">
        <button class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600"
                (click)="editPosting(selectedPosting)">Edit</button>
        <button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"
                (click)="withdrawPosting(selectedPosting)">Withdraw</button>
      </div>
    </div>
  </div>
</div>
